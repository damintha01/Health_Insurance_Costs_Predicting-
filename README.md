# Health Insurance Cost Prediction Web App

A Flask-based web application for predicting health insurance claim costs using machine learning models.

## Features

- 🎯 Predict insurance claim costs based on personal health information
- 🌐 Clean and modern web interface
- 📊 Displays prediction results with input details
- 🔌 RESTful API endpoint for integration
- 📱 Responsive design for mobile devices

## Prerequisites

- Python 3.10 or higher
- Trained machine learning models (generated from `analysis_model.ipynb`)

## Installation

1. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Ensure model files exist:**
   Make sure these files are in the project root directory:
   - `gender_label_encoder.pkl`
   - `diabetic_label_encoder.pkl`
   - `smoker_label_encoder.pkl`
   - `region_label_encoder.pkl`
   - `scaler.pkl`
   - `best_model.pkl`

   These files should be generated by running the notebook `analysis_model.ipynb`.

## Running the Application

1. **Start the Flask server:**
   ```bash
   python app.py
   ```

2. **Access the application:**
   Open your browser and navigate to:
   ```
   http://localhost:5000
   ```

## Usage

### Web Interface

1. Fill in the form with the required information:
   - Age (18-100 years)
   - Gender (Male/Female)
   - BMI (Body Mass Index)
   - Blood Pressure (Systolic)
   - Diabetic Status (Yes/No)
   - Number of Children
   - Smoker Status (Yes/No)
   - Region (Northeast/Northwest/Southeast/Southwest)

2. Click "Predict Insurance Cost"

3. View the predicted insurance claim cost and your input details

### API Endpoint

You can also use the API endpoint for programmatic access:

**Endpoint:** `POST /api/predict`

**Request Body (JSON):**
```json
{
    "age": 35,
    "gender": "male",
    "bmi": 25.5,
    "bloodpressure": 120,
    "diabetic": "No",
    "children": 2,
    "smoker": "No",
    "region": "northeast"
}
```

**Response (JSON):**
```json
{
    "prediction": 5234.56,
    "status": "success"
}
```

**Example using curl:**
```bash
curl -X POST http://localhost:5000/api/predict \
  -H "Content-Type: application/json" \
  -d '{
    "age": 35,
    "gender": "male",
    "bmi": 25.5,
    "bloodpressure": 120,
    "diabetic": "No",
    "children": 2,
    "smoker": "No",
    "region": "northeast"
  }'
```

**Example using Python:**
```python
import requests

data = {
    "age": 35,
    "gender": "male",
    "bmi": 25.5,
    "bloodpressure": 120,
    "diabetic": "No",
    "children": 2,
    "smoker": "No",
    "region": "northeast"
}

response = requests.post('http://localhost:5000/api/predict', json=data)
result = response.json()
print(f"Predicted cost: ${result['prediction']}")
```

## Project Structure

```
Health_Insurance_Costs_Predicting-/
├── app.py                          # Flask application
├── analysis_model.ipynb            # Model training notebook
├── insurance.csv                   # Dataset
├── requirements.txt                # Python dependencies
├── README.md                       # This file
├── templates/
│   ├── index.html                  # Home page
│   └── result.html                 # Results page
└── *.pkl                           # Trained models and encoders
```

## Model Files

The application requires the following pickle files:

- **Label Encoders**: Transform categorical variables
  - `gender_label_encoder.pkl`
  - `diabetic_label_encoder.pkl`
  - `smoker_label_encoder.pkl`
  - `region_label_encoder.pkl`

- **Scaler**: Normalize numerical features
  - `scaler.pkl`

- **Model**: The trained prediction model
  - `best_model.pkl`

## Deployment

For production deployment, use a production-grade WSGI server like Gunicorn:

```bash
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

## Technologies Used

- **Backend**: Flask (Python)
- **Machine Learning**: scikit-learn, XGBoost
- **Data Processing**: pandas, numpy
- **Model Serialization**: joblib
- **Frontend**: HTML5, CSS3

## Notes

- Make sure to run the notebook first to generate the required model files
- The application uses the best performing model selected during training
- All numerical inputs are validated and scaled appropriately
- Categorical inputs are encoded using the trained label encoders

## License

This project is for educational purposes.
